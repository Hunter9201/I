<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>THE LION HUNTER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- ‚úÖ Google site verification should be the token only -->
  <meta name="google-site-verification" content="google47c9c1017e180e8f" />
  <meta name="description" content="The Lion Hunter ‚Äì A jungle-themed portal for legal clarity, advocacy training, and nonstop discussion. Built for LDC students, designed for pride." />
  <meta name="keywords" content="The Lion Hunter, Lion Hunter, legal education, LDC Uganda, advocacy, case summaries, jungle platform, Arthur Solutions" />
  <meta property="og:title" content="The Lion Hunter" />
  <meta property="og:description" content="Empowering the pride through immersive learning and nonstop discussion." />
  <meta property="og:image" content="https://i.ibb.co/zVxt3D2Y/LDC-LEGAL-COMPANION.jpg" />

  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KCLCFN2CV4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-KCLCFN2CV4');
  </script>
  <!-- Microsoft Clarity -->
  <script>
    (function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}
    ;t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i
    ;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "srhjtupxnp");
  </script>

  <!-- Tailwind (for chat UI) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet" />
  <style>
    :root { --brand:#0f3057; } /* unified brand color */

    body { margin:0; font-family:'Poppins',sans-serif; background:#f7f9fc; color:#333; }
    header { position:relative; text-align:center; } /* important: relative for timetable/login absolute positioning */
    header img { width:100%; height:auto; display:block; }

    .menu-icon {
      position:absolute; top:10px; right:20px; font-size:28px; color:#fff;
      background: var(--brand); padding:8px 12px; border-radius:6px; cursor:pointer; z-index:1001;
    }

    .nav-container { position:fixed; top:0; right:-250px; width:250px; height:100%; background:#2e8bc0; padding-top:60px; transition:right .3s ease; box-shadow:-4px 0 12px rgba(0,0,0,.1); z-index:1000; }
    .nav-container.open { right:0; }
    .nav-container a { display:block; color:#fff; text-decoration:none; padding:1rem; font-weight:bold; border-bottom:1px solid rgba(255,255,255,.2); }
    .nav-container a:hover { background:#2474a9; }

    #calendar-alert { background:linear-gradient(to right,#283e51,#4b79a1); color:#fff; border-radius:8px; margin:12px auto; width:95%; max-width:800px; padding:12px 20px; font-size:.95rem; font-weight:500; box-shadow:0 2px 8px rgba(0,0,0,.15); display:flex; align-items:center; justify-content:space-between; animation:roar 1.6s infinite; }
    #calendar-alert a { background:#ffeb3b; color:#222; padding:6px 12px; text-decoration:none; border-radius:4px; font-weight:600; box-shadow:0 1px 4px rgba(0,0,0,.2); }
    @keyframes roar { 0%,100%{transform:scale(1)} 50%{transform:scale(1.02)} }

    main { padding:2rem; text-align:center; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:1.5rem; margin-top:2rem; }
    .card { background:#fff; padding:1rem; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,.08); transition:transform .2s; }
    .card:hover{ transform:translateY(-5px); }
    .card a { display:inline-block; margin-top:1rem; padding:.5rem 1rem; background:#2e8bc0; color:#fff; text-decoration:none; border-radius:5px; font-weight:bold; }
    .motto { background:#e3eef9; padding:2rem; margin:2rem; border-radius:10px; font-size:1.2rem; font-weight:600; color:#0f3057; }
    footer { background:#0f3057; color:#ccc; text-align:center; padding:1rem; font-size:.9rem; }

    /* Chat button effects */
    @keyframes lion-dance { 0%,100%{transform:translateY(0) rotate(0) scale(1)} 25%{transform:translateY(-8px) rotate(-3deg) scale(1.05)} 50%{transform:translateY(0) rotate(3deg) scale(1.02)} 75%{transform:translateY(-4px) rotate(2deg) scale(1.04)} }
    @keyframes lion-shake { 0%,100%{transform:translateX(0) rotate(0)} 15%,45%,75%{transform:translateX(-5px) rotate(-3deg)} 30%,60%,90%{transform:translateX(5px) rotate(3deg)} }
    .lion-dancing { animation: lion-dance 1.8s ease-in-out infinite alternate; }
    .lion-stopped { animation:none !important; transform:none !important; }
    .lion-shake { animation: lion-shake .5s ease-in-out 1; }

    /* === Login above Timetable (same color as hamburger/timetable) === */
    .login-hero-btn,
    .timetable-badge{
      background: var(--brand);
      color:#fff;
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      font-size:14px;
      display:inline-flex; gap:8px; align-items:center;
      box-shadow:0 10px 24px rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
      text-decoration:none;
      cursor:pointer; user-select:none;
    }
    .login-hero-btn:hover, .timetable-badge:hover { filter:brightness(1.05); }
    .timetable-dot{ width:8px; height:8px; border-radius:50%; background:#f59e0b; display:inline-block; }

    /* Position inside the hero image */
    .login-hero-btn{ position:absolute; top: 34px; left: 34px; z-index:1002; }
    .timetable-wrap{ position:absolute; top: 74px; left: 34px; z-index:1002; font-family: system-ui,-apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    /* Timetable popup */
    .timetable-pop{
      position:absolute; margin-top:10px; width:300px; background:#ffffff;
      border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 22px 48px rgba(0,0,0,.22);
      padding:10px; display:none;
    }
    .timetable-pop:before{
      content:""; position:absolute; top:-8px; left:22px; width:14px; height:14px;
      background:#fff; border-left:1px solid #e5e7eb; border-top:1px solid #e5e7eb; transform:rotate(45deg);
    }
    .timetable-pop h4{ margin:4px 8px 8px; font-size:14px; font-weight:800; color:#111827; }
    .timetable-list{ max-height:260px; overflow:auto; margin:0; padding:4px; }
    .timetable-item{ display:flex; justify-content:space-between; align-items:center; gap:10px; padding:8px 10px; border-radius:8px; transition:background .15s ease; }
    .timetable-item:hover{ background:#f9fafb; }
    .timetable-item span{ font-size:13px; color:#111827; font-weight:600; }
    .timetable-item a{ font-size:12px; text-decoration:none; padding:6px 10px; border-radius:8px; background:#0ea5e9; color:#fff; font-weight:700; }

    @media (max-width: 480px){
      .login-hero-btn{ left:16px; top:24px; }
      .timetable-wrap{ left:16px; top:56px; }
      .timetable-pop{ width:270px; }
    }
  </style>
</head>
<body>

  <!-- Alert -->
  <div id="calendar-alert">
    <div>
      üìÖ Check out for a discussion<br><small>Lion Hunt | Nonstop Discussions</small>
    </div>
    <a href="Discussions.html">View Calendar</a>
  </div>

  <header>
    <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>
    <img src="https://i.ibb.co/zVxt3D2Y/LDC-LEGAL-COMPANION.jpg" alt="LDC LEGAL COMPANION" />

    <!-- ‚úÖ Login button (static, above timetable, same color) -->
    <a href="login.html" class="login-hero-btn" id="login-hero-btn">Login</a>

    <!-- ü¶Å Timetables (inside hero image) -->
    <div class="timetable-wrap" id="timetableWrap" aria-haspopup="true" aria-expanded="false">
      <div class="timetable-badge" id="timetableBtn">
        <span class="timetable-dot"></span>
        Timetables
      </div>
      <div class="timetable-pop" id="timetablePop">
        <h4>Weekly Timetables</h4>
        <div class="timetable-list" id="timetableList"></div>
      </div>
    </div>
  </header>

  <nav id="navMenu" class="nav-container">
    <a href="laws.html">Laws</a>
    <a href="Fullcases.html">All WK Cases</a>
    <a href="caseslandone.html">Case Summaries</a>
    <a href="workshop.html">Workshops</a>
    <a href="Documents.html">Documents</a>
    <a href="IndividualAssessment.html">I.A</a>
    <a href="exams.html">Exams</a>
    <a href="oral-exams.html">Oral Exams</a>
    <a href="category-b.html">Category B</a>
    <a href="trial-advocacy.html">Trial Advocacy</a>
    <a href="audio.html">Audio</a>
    <a href="Discussions.html">Online Discussions</a>
    <a href="services.html">Bar Bites</a>
    <a href="services.html">Legal Services</a>
  </nav>

  <main>
    <h2>üìÇ Explore Sections</h2>
    <div class="grid">
      <div class="card"><h3>Laws</h3><p>Acts & Statutes.</p><a href="laws.html">Open</a></div>
      <div class="card"><h3>All WK Cases</h3><p>All Workshop Cases</p><a href="Fullcases.html">Open</a></div>
      <div class="card"><h3>Case Summaries</h3><p>Workshop Case Summaries</p><a href="caseslandone.html">Open</a></div>
      <div class="card"><h3>Workshops</h3><p>Civil, family, land, corporate & criminal workshops.</p><a href="workshop.html">Open</a></div>
      <div class="card"><h3>Documents</h3><p>Civil, family, land, corporate & criminal Documents.</p><a href="Documents.html">Open</a></div>
      <div class="card"><h3>Individual Assessment</h3><p>Friday Hunter Series.</p><a href=" IndividualAssessment.html">Open</a></div>
      <div class="card"><h3>Exams</h3><p>Past exams</p><a href="exams.html">Open</a></div>
      <div class="card"><h3>Oral Exams</h3><p>Practice questions and answers.</p><a href="oral-exams.html">Open</a></div>
      <div class="card"><h3>Category B</h3><p>Legal Writing, Professional Conduct & ADR.</p><a href="category-b.html">Open</a></div>
      <div class="card"><h3>Trial Advocacy</h3><p>Evidence rules, litigation guides and role-play prep.</p><a href="trial-advocacy.html">Open</a></div>
      <div class="card"><h3>Audio Lessons</h3><p>Voice recaps for revision on the go.</p><a href="audio.html">Open</a></div>
      <div class="card"><h3>Bar Bites</h3><p>Motivational content and war stories.</p><a href="services.html">Open</a></div>
      <div class="card"><h3>Online Discussions</h3><p>Lion Hunt | Nonstop Discussions</p><a href="Discussions.html">Open</a></div>
      <div class="card"><h3>Legal Services</h3><p>Let the Lion roar for you.</p><a href="services.html">Hire Me</a></div>
    </div>
  </main>

  <div class="motto">
    <h2>If others can, then with God, I must.<br />This pen is my tool, this paper is my battle ‚Äî and I won‚Äôt stop until the law bows to clarity.</h2>
  </div>

  <footer>
    &copy; 2025 Lion Hunt. Built for the Bar Hunters. Designed for excellence.
  </footer>

  <!-- ü¶Å Floating Chat Button (LEFT) -->
  <button id="lion-chat-button" class="lion-dancing rounded-full fixed bottom-6 left-6 w-14 h-14 bg-yellow-400 shadow-lg text-white text-3xl flex items-center justify-center" title="Chat">
    ü¶Å
  </button>

  <!-- üí¨ Chat Container (LEFT) -->
  <div id="lion-chat-container" class="fixed left-6 bottom-20 flex flex-col bg-white border-2 border-yellow-400 rounded-lg shadow-xl overflow-hidden max-h-0 w-72 transition-[max-height] duration-300">
    <div class="bg-yellow-400 text-white font-bold p-3 text-center">Lion Hunt Bot</div>
    <div id="lion-chat-messages" class="flex flex-col gap-2 p-3 overflow-y-auto" style="max-height: 260px;"></div>
    <div class="flex gap-2 p-3 border-t border-yellow-200">
      <textarea id="lion-user-input" class="flex-1 border rounded-md p-2 text-sm" rows="1" placeholder="Type a message..."></textarea>
      <button id="lion-send-btn" class="px-3 py-2 bg-yellow-400 text-white rounded-md">Send</button>
    </div>
  </div>

  <!-- ConnectyCube widget (optional) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/connectycube@4/dist/connectycube.min.js"></script>
  <script src="https://unpkg.com/@connectycube/chat-widget@latest/dist/index.umd.js"></script>
  <script>
    (function(){
      const chatWidgetContainer = document.createElement('div');
      chatWidgetContainer.id = 'ConnectyCube_chat-widget';
      document.body.appendChild(chatWidgetContainer);
      const props = {
        appId: 9313,
        authKey: '1C7B8D6C-7CB7-4B0B-9E50-68E6291E3D84',
        userId: '45',
        userName: 'Lion',
        showOnlineUsersTab: false,
        splitView: true,
      };
      if (window.ReactDOM && window.ConnectyCubeChatWidget) {
        ReactDOM.createRoot(chatWidgetContainer)
          .render(React.createElement(ConnectyCubeChatWidget, props));
      }
    })();
  </script>

  <!-- App Scripts -->
  <script>
    // Side menu
    function toggleMenu(){
      const menu = document.getElementById('navMenu');
      menu.classList.toggle('open');
    }
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll('#navMenu a').forEach(link => {
        link.addEventListener('click', () => document.getElementById('navMenu').classList.remove('open'));
      });
    });
  </script>

  <!-- üîî Firebase (single init) + FCM -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
    import { getMessaging, getToken, onMessage, isSupported } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-messaging.js";

    const firebaseConfig = {
      apiKey: "AIzaSyABgKrFpiFqC9gndXaK09MvhAVhZHAGk78",
      authDomain: "lionhunterwebpush.firebaseapp.com",
      projectId: "lionhunterwebpush",
      storageBucket: "lionhunterwebpush.firebasestorage.app",
      messagingSenderId: "803161144360",
      appId: "1:803161144360:web:6d64c6c5c275d894a4891d",
      measurementId: "G-GTJFDE1592"
    };

    const app = initializeApp(firebaseConfig);
    try { getAnalytics(app); } catch {}

    if (await isSupported()) {
      const messaging = (await import("https://www.gstatic.com/firebasejs/12.0.0/firebase-messaging.js")).getMessaging(app);

      // ‚úÖ Register service worker at the site root
      const swReg = await navigator.serviceWorker.register("/firebase-messaging-sw.js");

      const permission = await Notification.requestPermission();
      if (permission !== "granted") throw new Error("Notification permission not granted.");

      const token = await getToken(messaging, {
        vapidKey: "BOz1LEINl3DEOVWHBBZl4WLVIWR4mONDH0rmovfIvIOauLkE9_uBgN7U94T3rtdaO9AWyaA_WmA7yP1hnEcx98c",
        serviceWorkerRegistration: swReg
      });
      console.log("ü¶Å Device FCM Token:", token);

      onMessage(messaging, (payload) => {
        console.log("üì® Foreground message received:", payload);
        const n = payload.notification || {};
        alert((n.title||"Lion Hunt") + "\n" + (n.body||""));
      });
    } else {
      console.warn("FCM is not supported in this browser.");
    }
  </script>

  <!-- ü¶Å Simple local chat (uses OpenAI API‚Äîreplace YOUR_OPENAI_API_KEY) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('lion-chat-button');
      const container = document.getElementById('lion-chat-container');
      const messagesDiv = document.getElementById('lion-chat-messages');
      const input = document.getElementById('lion-user-input');
      const sendBtn = document.getElementById('lion-send-btn');

      let messages = JSON.parse(localStorage.getItem('lionChat') || '[]');
      const saveHistory = () => localStorage.setItem('lionChat', JSON.stringify(messages));
      const scrollBottom = () => { messagesDiv.scrollTop = messagesDiv.scrollHeight; };

      function appendMsg(content, role) {
        const msg = document.createElement('div');
        msg.className = role === 'user'
          ? 'self-end bg-yellow-400 text-white px-3 py-1 rounded-l-lg rounded-br-lg max-w-[85%] whitespace-pre-wrap'
          : 'self-start bg-gray-100 text-gray-800 px-3 py-1 rounded-r-lg rounded-bl-lg max-w-[85%] whitespace-pre-wrap';
        msg.textContent = content;
        messagesDiv.appendChild(msg);
        scrollBottom();
      }

      messages.forEach(m => appendMsg(m.content, m.role));

      const toggleChat = () => {
        const open = container.classList.toggle('open');
        container.style.maxHeight = open ? '400px' : '0';
        if (!open) { btn.classList.add('lion-dancing'); btn.classList.remove('lion-stopped'); }
        else { input.focus(); }
      };

      btn.addEventListener('click', () => {
        if (btn.classList.contains('lion-dancing')) {
          btn.classList.remove('lion-dancing');
          btn.classList.add('lion-stopped','lion-shake');
          btn.addEventListener('animationend', () => btn.classList.remove('lion-shake'), { once:true });
          container.classList.add('open'); container.style.maxHeight = '400px'; input.focus();
        } else { toggleChat(); }
      });

      sendBtn.addEventListener('click', async () => {
        const text = input.value.trim();
        if (!text) return;
        messages.push({role:'user', content:text}); saveHistory(); appendMsg(text,'user');
        input.value=''; sendBtn.disabled = true;

        const aiBubble = document.createElement('div');
        aiBubble.className = 'self-start bg-gray-100 text-gray-800 px-3 py-1 rounded-r-lg rounded-bl-lg max-w-[85%] whitespace-pre-wrap';
        messagesDiv.appendChild(aiBubble); scrollBottom();

        const atStart = [{role:'system', content:"You are Lion Hunt Bot. If service isn't ready, say: 'Service is not available yet ‚Äî coming soon!'"},
                         ...messages];

        try {
          const resp = await fetch("https://api.openai.com/v1/chat/completions", {
            method:"POST",
            headers:{ "Content-Type":"application/json", "Authorization":"Bearer YOUR_OPENAI_API_KEY" },
            body: JSON.stringify({ model:"gpt-3.5-turbo", messages:atStart, stream:true })
          });
          if (!resp.ok) throw new Error(await resp.text());

          const reader = resp.body.getReader(); const decoder = new TextDecoder("utf-8");
          let assistantText = "";
          while (true) {
            const {value, done} = await reader.read(); if (done) break;
            const chunk = decoder.decode(value, {stream:true});
            chunk.split("\n").forEach(line => {
              if (line.startsWith("data: ")) {
                const json = line.slice(6).trim();
                if (json === "[DONE]") return;
                try {
                  const parsed = JSON.parse(json);
                  const delta = parsed.choices[0].delta?.content;
                  if (delta) { assistantText += delta; aiBubble.textContent = assistantText; scrollBottom(); }
                } catch {}
              }
            });
          }
          messages.push({role:'assistant', content:assistantText}); saveHistory();
        } catch(err) {
          aiBubble.textContent = "Error: " + err; console.error(err);
        } finally { sendBtn.disabled = false; }
      });

      input.addEventListener('keydown', e => {
        if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendBtn.click(); }
      });
    });
  </script>

  <!-- ü¶Å Popup Message (single instance) -->
  <div id="popup" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:3000; align-items:center; justify-content:center; padding:16px;">
    <div style="background:#fff; color:#0f3057; border-radius:14px; padding:22px 26px; text-align:center; box-shadow:0 12px 30px rgba(0,0,0,.15); max-width:420px; width:100%; animation:fadeInUp 0.25s ease; border:1px solid #e9eef5;">
      <h4 style="margin:0 0 8px; font-size:1.15rem;">ü¶Å The Lion‚Äôs Den is being constructed</h4>
      <p style="margin:0 0 14px; color:#445;">We‚Äôre sharpening our claws. Check back soon.</p>
      <button onclick="closePopup()" style="border:0; padding:8px 14px; border-radius:10px; cursor:pointer; font-weight:600; background:#2e8bc0; color:#fff;">OK</button>
    </div>
  </div>

  <!-- üîí Lock all cards EXCEPT the four specified (IA UNLOCKED) -->
  <script>
    const popup = document.getElementById('popup');
    function closePopup(){ popup.style.display = 'none'; }
    function openPopup(){ popup.style.display = 'flex'; }

    document.addEventListener('DOMContentLoaded', () => {
      // ‚úÖ use lowercase for matching (we lowercase titles below)
      const unlocked = ["laws","individual assessment","all wk cases","case summaries"];

      document.querySelectorAll('.card').forEach(card => {
        const title = (card.querySelector('h3')?.innerText || "").trim().toLowerCase();

        // ‚úÖ ensure IA card points to the right page
        if (title === "individual assessment") {
          let link = card.querySelector('a');
          if (!link) { link = document.createElement('a'); link.textContent = 'Open'; card.appendChild(link); }
          link.href = "IndividualAssessment.html";
        }

        if (!unlocked.includes(title)) {
          card.addEventListener('click', (e) => {
            if (e.target.closest('a')) e.preventDefault();
            e.preventDefault();
            openPopup();
          });
          card.querySelectorAll('a').forEach(a => {
            a.addEventListener('click', (e) => { e.preventDefault(); openPopup(); });
          });
        }
      });

      popup.addEventListener('click', (e) => { if (e.target === popup) closePopup(); });
    });
  </script>

  <!-- üîí Lock specific nav links (IA left UNLOCKED) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const lockedNav = [
        'workshop.html',
        'documents.html',
        'exams.html',
        'oral-exams.html',
        'category-b.html',
        'trial-advocacy.html',
        'audio.html'
      ];

      document.querySelectorAll('#navMenu a').forEach(a => {
        // Compare attribute and resolved path
        const hrefAttr = (a.getAttribute('href') || '').toLowerCase();
        const pathName = (new URL(a.href, location.href)).pathname.toLowerCase();

        // ‚úÖ Explicitly allow IndividualAssessment.html
        const isIA = hrefAttr === 'individualassessment.html' || pathName.endsWith('/individualassessment.html');
        if (isIA) return;

        const isLocked = lockedNav.some(t =>
          hrefAttr === t || pathName.endsWith('/' + t)
        );

        if (isLocked) {
          a.addEventListener('click', (e) => {
            e.preventDefault();
            openPopup();
            document.getElementById('navMenu')?.classList.remove('open');
          });
        }
      });
    });
  </script>

  <!-- === Timetable logic === -->
  <script>
    // Replace with your real Google links (keep /preview for fast viewer)
    const WEEK_LINKS = [
      { label: "Week 1 (Family)",    url: "https://drive.google.com/drive/folders/1p4CqiLEgrcY0m-yCBDDB0zbLBQh5nZia?usp=sharing" },
      { label: "Week 2 (Civil)",     url: "https://docs.google.com/spreadsheets/d/EXAMPLE2/preview" },
      { label: "Week 3 (Corporate)", url: "https://drive.google.com/file/d/EXAMPLE3/preview" },
      { label: "Week 4 (Criminal)",  url: "https://docs.google.com/document/d/EXAMPLE4/preview" },
      { label: "Week 5 (Land)",      url: "https://docs.google.com/document/d/EXAMPLE5/preview" }
    ];

    // Build timetable list
    const listEl = document.getElementById('timetableList');
    if (listEl) {
      WEEK_LINKS.forEach(item => {
        const row = document.createElement('div');
        row.className = 'timetable-item';
        const title = document.createElement('span'); title.textContent = item.label;

        const open = document.createElement('a');
        open.textContent = 'Open';
        open.href = item.url;
        open.target = '_blank';
        open.rel = 'noopener';

        row.appendChild(title);
        row.appendChild(open);
        listEl.appendChild(row);
      });
    }

    // Popup toggle & close behaviors
    const btn  = document.getElementById('timetableBtn');
    const pop  = document.getElementById('timetablePop');
    const wrap = document.getElementById('timetableWrap');

    function openPop(){
      pop.style.display = 'block';
      wrap.setAttribute('aria-expanded','true');
      document.addEventListener('click', onClickAway, {capture:true});
      document.addEventListener('keydown', onEsc);
    }
    function closePop(){
      pop.style.display = 'none';
      wrap.setAttribute('aria-expanded','false');
      document.removeEventListener('click', onClickAway, {capture:true});
      document.removeEventListener('keydown', onEsc);
    }
    function onClickAway(e){ if(!wrap.contains(e.target)) closePop(); }
    function onEsc(e){ if(e.key==='Escape') closePop(); }

    if (btn) {
      btn.addEventListener('click', e => {
        e.stopPropagation();
        (pop.style.display === 'block') ? closePop() : openPop();
      });
    }

    // üîí Temporarily lock login (same behavior as before)
    document.addEventListener('DOMContentLoaded', () => {
      const loginBtn = document.getElementById('login-hero-btn');
      if (loginBtn) {
        loginBtn.addEventListener('click', function (e) {
          e.preventDefault();
          alert("üîí Premium services coming soon!");
        });
      }
    });
  </script>
</body>
</html>
